<!DOCTYPE html>
<html lang="sv">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Idle Truck Tycoon ğŸš›</title>

<style>
body{
  margin:0;
  font-family:Arial, sans-serif;
  background:#111827;
  color:white;
}

h1{text-align:center;margin:10px 0}

.money{text-align:center;font-size:1.4em}

.container{
  display:flex;
  flex-direction:column;
  gap:10px;
  padding:10px;
}

.card{
  background:#1f2937;
  border-radius:12px;
  padding:12px;
}

button{
  width:100%;
  padding:10px;
  margin-top:6px;
  border:none;
  border-radius:8px;
  background:#22c55e;
  color:white;
  font-size:1em;
}

button:disabled{
  background:#555;
}

select{
  width:100%;
  padding:8px;
  border-radius:8px;
}

#map{
  position:relative;
  height:180px;
  border-radius:12px;
  background:linear-gradient(#2563eb,#0f172a);
  overflow:hidden;
}

.city{
  position:absolute;
  font-size:0.8em;
  background:#111827cc;
  padding:4px 6px;
  border-radius:6px;
  cursor:pointer;
}

.city.active{
  background:#22c55e;
}

.truck{
  position:absolute;
  font-size:20px;
  animation:drive linear infinite;
}

@keyframes drive{
  from{transform:translateX(0)}
  to{transform:translateX(120px)}
}
</style>
</head>

<body>

<h1>ğŸš› Idle Truck Tycoon</h1>
<div class="money">ğŸ’° $<span id="money">10</span> | ğŸ’¸ <span id="income">0</span>/sek</div>

<div class="container">

<!-- MAP -->
<div class="card">
<h3>ğŸ—ºï¸ Karta</h3>
<div id="map">
  <div class="city active" style="top:20px;left:20px" onclick="selectCity('stockholm')">ğŸ™ï¸ Stockholm</div>
  <div class="city" style="top:100px;left:80px" onclick="selectCity('gothenburg')">ğŸŒ‰ GÃ¶teborg</div>
  <div class="city" style="top:40px;left:180px" onclick="selectCity('berlin')">ğŸŒ Berlin</div>
</div>
<p>Vald stad: <b><span id="cityName">Stockholm</span></b></p>
</div>

<!-- ROUTE -->
<div class="card">
<h3>ğŸ›£ï¸ Rutt</h3>
<select id="route">
  <option value="1">ğŸ™ï¸ Stad</option>
  <option value="1.5">ğŸ›£ï¸ MotorvÃ¤g</option>
  <option value="2">ğŸŒ Internationell</option>
</select>
</div>

<!-- TRUCKS -->
<div class="card">
<h3>ğŸšš Volvo FH</h3>
<p>1$/sek | Ã„gda: <span id="volvo">0</span></p>
<button onclick="buy('volvo')">KÃ¶p ($10)</button>
</div>

<div class="card">
<h3>ğŸš› Scania R</h3>
<p>5$/sek | Ã„gda: <span id="scania">0</span></p>
<button onclick="buy('scania')">KÃ¶p ($50)</button>
</div>

<div class="card">
<h3>ğŸš MAN TGX</h3>
<p>15$/sek | Ã„gda: <span id="man">0</span></p>
<button onclick="buy('man')">KÃ¶p ($150)</button>
</div>

</div>

<script>
/* ===== DATA ===== */
let money = +localStorage.money || 10;
let lastTime = +localStorage.lastTime || Date.now();
let route = +localStorage.route || 1;
let city = localStorage.city || "stockholm";

const cities={
  stockholm:{name:"Stockholm",mult:1,travel:1},
  gothenburg:{name:"GÃ¶teborg",mult:1.5,travel:3},
  berlin:{name:"Berlin",mult:2.5,travel:6}
};

const trucks={
  volvo:{count:+localStorage.volvo||0,base:1,icon:"ğŸšš"},
  scania:{count:+localStorage.scania||0,base:5,icon:"ğŸš›"},
  man:{count:+localStorage.man||0,base:15,icon:"ğŸš"}
};

/* ===== OFFLINE ===== */
let diff=Math.floor((Date.now()-lastTime)/1000);
money+=diff*income();

/* ===== INCOME ===== */
function income(){
  let total=0;
  for(let t in trucks){
    total+=trucks[t].count*trucks[t].base;
  }
  return Math.floor(total*route*cities[city].mult);
}

/* ===== BUY ===== */
function buy(t){
  const cost={volvo:10,scania:50,man:150}[t];
  if(money>=cost){
    money-=cost;
    trucks[t].count++;
    drawTrucks();
    save(); ui();
  }
}

/* ===== MAP ===== */
function drawTrucks(){
  document.querySelectorAll(".truck").forEach(t=>t.remove());
  for(let t in trucks){
    for(let i=0;i<trucks[t].count;i++){
      let d=document.createElement("div");
      d.className="truck";
      d.textContent=trucks[t].icon;
      d.style.left="20px";
      d.style.top=(140+Math.random()*20)+"px";
      d.style.animationDuration=(cities[city].travel*2)+"s";
      map.appendChild(d);
    }
  }
}

function selectCity(c){
  city=c;
  document.querySelectorAll(".city").forEach(el=>el.classList.remove("active"));
  event.target.classList.add("active");
  save(); ui(); drawTrucks();
}

/* ===== SAVE ===== */
function save(){
  localStorage.money=money;
  localStorage.lastTime=Date.now();
  localStorage.route=route;
  localStorage.city=city;
  for(let t in trucks){
    localStorage[t]=trucks[t].count;
  }
}

/* ===== UI ===== */
function ui(){
  moneyEl.textContent=Math.floor(money);
  incomeEl.textContent=income();
  cityName.textContent=cities[city].name;
  volvo.textContent=trucks.volvo.count;
  scania.textContent=trucks.scania.count;
  man.textContent=trucks.man.count;
}

/* ===== LOOP ===== */
setInterval(()=>{
  money+=income();
  save(); ui();
},1000);

/* ===== ELEMENTS ===== */
const moneyEl=document.getElementById("money");
const incomeEl=document.getElementById("income");
const cityName=document.getElementById("cityName");
const map=document.getElementById("map");
const volvo=document.getElementById("volvo");
const scania=document.getElementById("scania");
const man=document.getElementById("man");

const routeSelect=document.getElementById("route");
routeSelect.onchange=()=>{route=+routeSelect.value;save();};

drawTrucks();
ui();
</script>

</body>
</html>

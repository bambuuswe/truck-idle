<!DOCTYPE html>
<html lang="sv">
<head>
<meta charset="UTF-8">
<title>Idle Truck Tycoon ğŸš›</title>

<style>
body{
  background:linear-gradient(135deg,#1e1e2f,#2e2e4f);
  color:white;
  font-family:Arial, sans-serif;
  text-align:center;
  padding:20px;
}
h1{font-size:2.4em}

.card{
  background:rgba(255,255,255,.1);
  border-radius:14px;
  padding:15px;
  margin:12px auto;
  max-width:380px;
}

button{
  padding:8px 16px;
  border:none;
  border-radius:8px;
  background:#4caf50;
  color:white;
  cursor:pointer;
  margin:4px;
}
button:disabled{background:#555}

.money{font-size:1.6em;margin:10px}

#map{
  position:relative;
  height:120px;
  border-radius:12px;
  background:#0b3d2e;
  overflow:hidden;
}

.truck{
  position:absolute;
  font-size:22px;
  animation:drive 6s linear infinite;
}

@keyframes drive{
  from{left:-40px}
  to{left:100%}
}

select{padding:6px;border-radius:6px}

.float{
  position:fixed;
  color:#7CFF7C;
  font-weight:bold;
  animation:floatUp 1s ease-out forwards;
}

@keyframes floatUp{
  from{opacity:1;transform:translateY(0)}
  to{opacity:0;transform:translateY(-40px)}
}
</style>
</head>

<body>

<h1>ğŸš› Idle Truck Tycoon</h1>

<div class="money">ğŸ’° $<span id="money">10</span></div>
<div>ğŸ’¸ <span id="income">0</span> / sek</div>

<!-- MUSIC -->
<div class="card">
  <button onclick="toggleMusic()">ğŸµ Musik On/Off</button>
</div>

<!-- MAP -->
<div class="card">
  <h3>ğŸ—ºï¸ Karta</h3>
  <div id="map"></div>
</div>

<!-- ROUTE -->
<div class="card">
  <h3>ğŸ›£ï¸ Rutt</h3>
  <select id="route">
    <option value="1">ğŸ™ï¸ Stad (x1)</option>
    <option value="1.5">ğŸ›£ï¸ MotorvÃ¤g (x1.5)</option>
    <option value="2">ğŸŒ Internationell (x2)</option>
  </select>
</div>

<!-- VOLVO -->
<div class="card">
<h3>ğŸšš Volvo FH</h3>
<p>1$/sek | Ã„gda: <span id="volvo">0</span></p>
<p>Upgrade: <span id="volvoUp">0</span></p>
<button onclick="buy('volvo')">KÃ¶p (10)</button>
<button onclick="upgrade('volvo')">Upgrade (25)</button>
</div>

<!-- SCANIA -->
<div class="card">
<h3>ğŸš› Scania R</h3>
<p>5$/sek | Ã„gda: <span id="scania">0</span></p>
<p>Upgrade: <span id="scaniaUp">0</span></p>
<button onclick="buy('scania')">KÃ¶p (50)</button>
<button onclick="upgrade('scania')">Upgrade (100)</button>
</div>

<!-- MAN -->
<div class="card">
<h3>ğŸš MAN TGX</h3>
<p>15$/sek | Ã„gda: <span id="man">0</span></p>
<p>Upgrade: <span id="manUp">0</span></p>
<button onclick="buy('man')">KÃ¶p (150)</button>
<button onclick="upgrade('man')">Upgrade (300)</button>
</div>

<audio id="music" loop>
  <source src="https://cdn.pixabay.com/audio/2022/08/01/audio_9b4d9e0e8c.mp3" type="audio/mpeg">
</audio>

<script>
/* ===== DATA ===== */
let money = +localStorage.money || 10;
let lastTime = +localStorage.lastTime || Date.now();
let route = +localStorage.route || 1;

const trucks = {
  volvo:{count:+localStorage.volvo||0,up:+localStorage.volvoUp||0,base:1,icon:"ğŸšš"},
  scania:{count:+localStorage.scania||0,up:+localStorage.scaniaUp||0,base:5,icon:"ğŸš›"},
  man:{count:+localStorage.man||0,up:+localStorage.manUp||0,base:15,icon:"ğŸš"}
};

/* ===== OFFLINE INCOME ===== */
let diff = Math.floor((Date.now()-lastTime)/1000);
money += diff * income();

/* ===== MUSIC ===== */
const music=document.getElementById("music");
let musicOn = localStorage.music==="on";
if(musicOn) music.play();

function toggleMusic(){
  musicOn=!musicOn;
  localStorage.music=musicOn?"on":"off";
  musicOn?music.play():music.pause();
}

/* ===== INCOME ===== */
function income(){
  let total=0;
  for(let t in trucks){
    total+=trucks[t].count*(trucks[t].base+trucks[t].up*trucks[t].base);
  }
  return Math.floor(total*route);
}

/* ===== MAP TRUCKS ===== */
function drawTrucks(){
  map.innerHTML="";
  for(let t in trucks){
    for(let i=0;i<trucks[t].count;i++){
      let d=document.createElement("div");
      d.className="truck";
      d.textContent=trucks[t].icon;
      d.style.top=Math.random()*80+"px";
      d.style.animationDuration=(4+Math.random()*4)+"s";
      map.appendChild(d);
    }
  }
}

/* ===== ACTIONS ===== */
function buy(t){
  let cost={volvo:10,scania:50,man:150}[t];
  if(money>=cost){
    money-=cost;
    trucks[t].count++;
    drawTrucks(); save(); ui();
  }
}
function upgrade(t){
  let cost={volvo:25,scania:100,man:300}[t];
  if(money>=cost){
    money-=cost;
    trucks[t].up++;
    save(); ui();
  }
}

/* ===== UI ===== */
function ui(){
  moneyEl.textContent=Math.floor(money);
  incomeEl.textContent=income();
  routeSelect.value=route;

  volvo.textContent=trucks.volvo.count;
  scania.textContent=trucks.scania.count;
  man.textContent=trucks.man.count;

  volvoUp.textContent=trucks.volvo.up;
  scaniaUp.textContent=trucks.scania.up;
  manUp.textContent=trucks.man.up;
}

/* ===== SAVE ===== */
function save(){
  localStorage.money=money;
  localStorage.lastTime=Date.now();
  localStorage.route=route;
  for(let t in trucks){
    localStorage[t]=trucks[t].count;
    localStorage[t+"Up"]=trucks[t].up;
  }
}

/* ===== LOOP ===== */
setInterval(()=>{
  money+=income();
  save(); ui();
},1000);

/* ===== ELEMENTS ===== */
const moneyEl=moneyEl=document.getElementById("money");
const incomeEl=document.getElementById("income");
const routeSelect=document.getElementById("route");
routeSelect.onchange=()=>{route=+routeSelect.value;save();};

const map=document.getElementById("map");
const volvo=document.getElementById("volvo");
const scania=document.getElementById("scania");
const man=document.getElementById("man");
const volvoUp=document.getElementById("volvoUp");
const scaniaUp=document.getElementById("scaniaUp");
const manUp=document.getElementById("manUp");

/* ===== START ===== */
drawTrucks();
ui();
</script>

</body>
</html>
